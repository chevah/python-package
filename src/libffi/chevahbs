#!/usr/bin/env bash
#
# Chevah Build Script for libffi.
#
# Import shared code.
. ./functions.sh

chevahbs_configure() {
    # We want only static build so that we don't have to mess with LIBPATH.
    execute ./configure --prefix="" --disable-shared --enable-static
}


chevahbs_compile() {
    execute $MAKE
}


chevahbs_install() {
    # 'make install' fails in some non-Linux OS'es, so we copy them manually.
    execute cp */include/*.h $INSTALL_FOLDER/include/
    execute cp -r */.libs/libffi* $INSTALL_FOLDER/lib/
}


select_chevahbs_command $@
